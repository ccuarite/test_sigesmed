<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">


<hibernate-configuration>
    <bean class="java.net.URI" id="dbUrl">
    <constructor-arg value="#{systemEnvironment['DATABASE_URL']}"/>

    </bean>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
    <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
    <property name="hibernate.temp.use_jdbc_metadata_defaults">false</property>
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource">
         <property name="hibernate.connection.url" value="#{ 'jdbc:postgresql://' + @dbUrl.getHost() + ':' + @dbUrl.getPort() + @dbUrl.getPath() }"/>
         <property name="hibernate.connection.username" value="#{ @dbUrl.getUserInfo().split(':')[0] }"/>
         <property name="hibernate.connection.password" value="#{ @dbUrl.getUserInfo().split(':')[1] }"/>
    </bean>   
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.format_sql">true</property>
    
    <!--configguracion inicial-->
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.FuncionSistema" />
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.SubModuloSistema" />
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.ModuloSistema" />
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.Organizacion" />
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.Area" />
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.OrganizacionRol" />
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.Rol" />
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.RolFuncion" />
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.Usuario" />    
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.TipoOrganizacion" />
<!--tramite documentario-->
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.TipoTramite" />
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.RequisitoTramite" />
    <mapping class="com.dremo.ucsm.gsc.sigesmed.core.entity.RutaTramite" />
    
  </session-factory>
</hibernate-configuration>
